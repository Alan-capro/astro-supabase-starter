---
import Layout from "../components/Layout.astro";
---

<Layout title="生日快乐">
  <div class="min-h-screen flex flex-col items-center justify-center relative overflow-hidden bg-gradient-to-br from-pink-100 via-purple-50 to-blue-100">
    <!-- 标题文字 -->
    <div class="text-center text-gray-800 px-8 mb-12 z-20">
      <h1 class="text-4xl md:text-6xl font-light mb-6 animate-fade-in">
        祝你生日快乐
      </h1>
      <p class="text-lg md:text-xl font-light opacity-80 animate-fade-in-delay">
        愿你的每一天都充满快乐
      </p>
    </div>
    
    <!-- 视频容器 -->
    <div class="relative w-full max-w-2xl mx-auto mb-16">
      <div class="bg-white rounded-3xl overflow-hidden shadow-2xl border border-gray-200">
        <video 
          id="openingVideo" 
          class="w-full h-auto object-contain" 
          autoplay
          loop
          playsinline
          preload="auto"
          controls
        >
          <source src="/videos/open.mp4" type="video/mp4">
          <source src="/videos/open.mov" type="video/quicktime">
          您的浏览器不支持视频播放。
        </video>
      </div>
    </div>
    
    <!-- 动态点缀 -->
    <div class="absolute top-20 left-8 w-4 h-4 bg-yellow-300 rounded-full animate-float z-10"></div>
    <div class="absolute top-32 right-12 w-3 h-3 bg-pink-300 rounded-full animate-float-delay z-10"></div>
    <div class="absolute bottom-32 left-16 w-5 h-5 bg-blue-300 rounded-full animate-float-delay-2 z-10"></div>
    <div class="absolute bottom-20 right-8 w-4 h-4 bg-green-300 rounded-full animate-float z-10"></div>
    
    <!-- 导航按钮 -->
    <div class="mt-8">
      <a href="/welcome" class="apple-button-large">
        开始我们的故事 →
      </a>
    </div>
  </div>
</Layout>

<style>
  /* 动态效果动画 */
  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  @keyframes float {
    0%, 100% {
      transform: translateY(0px);
    }
    50% {
      transform: translateY(-10px);
    }
  }
  
  @keyframes floatDelay {
    0%, 100% {
      transform: translateY(0px);
    }
    50% {
      transform: translateY(-15px);
    }
  }
  
  @keyframes floatDelay2 {
    0%, 100% {
      transform: translateY(0px);
    }
    50% {
      transform: translateY(-8px);
    }
  }
  
  .animate-fade-in {
    animation: fadeIn 1s ease-out;
  }
  
  .animate-fade-in-delay {
    animation: fadeIn 1s ease-out 0.5s both;
  }
  
  .animate-float {
    animation: float 3s ease-in-out infinite;
  }
  
  .animate-float-delay {
    animation: floatDelay 3s ease-in-out infinite 1s;
  }
  
  .animate-float-delay-2 {
    animation: floatDelay2 3s ease-in-out infinite 2s;
  }
  
  .apple-button-large {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border: none;
    padding: 16px 32px;
    border-radius: 25px;
    font-size: 18px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    text-decoration: none;
    display: inline-block;
    box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
  }
  
  .apple-button-large:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
    background: linear-gradient(135deg, #5a6fd8 0%, #6a4190 100%);
  }
  
  .apple-button-large:active {
    transform: translateY(0);
    transition: transform 0.1s;
  }
</style>

<script>
  // 开场视频
  function initOpeningVideo() {
    const openingVideo = document.getElementById('openingVideo');
    
    if (openingVideo) {
      const video = openingVideo as HTMLVideoElement;
      
      console.log('开场视频元素:', video);
      console.log('视频源:', video.src);
      console.log('视频就绪状态:', video.readyState);
      
      // 监听视频事件
      video.addEventListener('loadstart', () => console.log('开场视频开始加载'));
      video.addEventListener('loadedmetadata', () => console.log('开场视频元数据加载完成'));
      video.addEventListener('loadeddata', () => console.log('开场视频数据加载完成'));
      video.addEventListener('canplay', () => console.log('开场视频可以播放'));
      video.addEventListener('canplaythrough', () => console.log('开场视频可以流畅播放'));
      video.addEventListener('error', (e) => {
        console.log('开场视频加载错误:', e);
        console.log('错误详情:', video.error);
      });
      
      // 等待视频加载完成后再播放
      const playVideo = () => {
        console.log('尝试播放开场视频...');
        video.play().then(() => {
          console.log('开场视频播放成功！');
        }).catch((err: any) => {
          console.log('开场视频播放失败:', err);
        });
      };
      
      if (video.readyState >= 3) {
        playVideo();
      } else {
        video.addEventListener('canplay', playVideo);
      }
      
      // 点击视频暂停/播放
      video.addEventListener('click', () => {
        if (video.paused) {
          video.play();
        } else {
          video.pause();
        }
      });
    } else {
      console.log('找不到开场视频元素！');
    }
  }
  
  // 页面加载完成后初始化
  document.addEventListener('DOMContentLoaded', function() {
    console.log('开场视频页面加载完成');
    initOpeningVideo();
  });
</script>
